{"version":3,"sources":["index.js"],"names":["module","hot","accept","startEndpoint","App","document","querySelector","queryProperties","q","topic","lang","country","page_size","from","getItemFromLocalStore","key","window","localStorage","getItem","setItemToLocalStore","value","setItem","Object","keys","forEach","item","defaultSearch","input","trim","setValueInLocalStorage","event","target","id","selected","setValueInLocalStorage2","preventDefault","valuesFromKey","createQueryToApi","url","filter","map","replaceAll","fetchingNews","fetch","method","headers","then","res","status","Error","json","catch","error","console","data","renderApp","articles","checkComponentOrProps","args","checkNullOrContent","arg","returnPlaceHolderUrl","getUrlForNewsImage","includes","replace","checkValueFromFormItem","onSubmitHandler","someHamdler","insertComponent","concatTimeStamp","time","sortNewsByTimeStamp","a","b","Date","parse","published_date","filterNewsByRealTimeStamp","article","now","resetFilters","setSelectedFilters","applyResetFilters","queryParamFromHandler","applyQueryParamFromHandler","pageSizeHandler","applyPageSizeHandler","normalizeNews","news","sort","Header","styles","header","flex__center","width_100","border_bottom","flex__space_between","width_80","length","join","Account","header__avatar","Main","main","undefined","flex__start","news__picture","media","link","title","toLocaleDateString","toLocaleTimeString","author","clean_url","summary","apiData","innerHTML"],"mappings":"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","file":"news-app.1d94e80a.js","sourceRoot":"..","sourcesContent":["if (module.hot) {\n  module.hot.accept();\n}\n\nimport styles from './style.css';\nconst startEndpoint = 'https://free-news.p.rapidapi.com/v1/search?q=*&lang=uk&&page_size=100&';\nconst App = document.querySelector('.app-root');\nconst queryProperties = {\n  q: '*',\n  topic: 'default',\n  lang: 'default',\n  country: 'default',\n  page_size: '75',\n  from: '',\n};\n\nfunction getItemFromLocalStore(key) {\n  return window.localStorage.getItem(`${key}`);\n}\n\nfunction setItemToLocalStore(key, value) {\n  return window.localStorage.setItem(key, value);\n}\n\nObject.keys(queryProperties).forEach(item => {\n  setItemToLocalStore(item, queryProperties[item]);\n});\n\nconst defaultSearch = input => {\n  return input.trim() === '' ? '*' : input.trim();\n};\n\nconst setValueInLocalStorage = event => {\n  setItemToLocalStore(event.target.id, defaultSearch(event.target.value));\n  event.target.value\n    ? (event.target.querySelector(`option[value=${event.target.value}]`).selected = true)\n    : '';\n};\n\nwindow.setValueInLocalStorage = setValueInLocalStorage;\n\nconst setValueInLocalStorage2 = event => {\n  event.preventDefault();\n  window.setValueInLocalStorage(event);\n};\n\nconst valuesFromKey = key => {\n  return !(\n    getItemFromLocalStore(`${key}`) == false || getItemFromLocalStore(`${key}`) === 'default'\n  )\n    ? `${key}=${getItemFromLocalStore(`${key}`)}&`\n    : ``;\n};\n\nconst createQueryToApi = () => {\n  let url = `https://free-news.p.rapidapi.com/v1/search?`;\n  Object.keys(queryProperties)\n    .filter(item => item !== 'from')\n    .map(key => (url += valuesFromKey(key)));\n  if (getItemFromLocalStore('from') !== '') {\n    return (url += `&from=${getItemFromLocalStore('from').replaceAll('-', '/')}`);\n  }\n  return url;\n};\n\nconst fetchingNews = (url = startEndpoint) => {\n  fetch(`${url}`, {\n    method: 'GET',\n    headers: {\n      'x-rapidapi-key': `${process.env.API_KEY}`,\n      'x-rapidapi-host': 'free-news.p.rapidapi.com',\n    },\n  })\n    .then(res => {\n      if (res.status != 200) {\n        throw new Error('Network response was not OK');\n      } else {\n        return res.json();\n      }\n    })\n    .catch(error => {\n      console.error('There has been a problem with your fetch operation:', error);\n    })\n    .then(data => {\n      renderApp(data.articles);\n    });\n};\n\nfetchingNews();\n\nconst checkComponentOrProps = args => {\n  if (typeof args === 'function') {\n    return true;\n  }\n  return false;\n};\n\nconst checkNullOrContent = arg => {\n  return arg === null ? '' : arg;\n};\n\nconst returnPlaceHolderUrl = () => {\n  return 'https://via.placeholder.com/450x250.png?text=NoImage';\n};\n\nconst getUrlForNewsImage = url => {\n  return checkNullOrContent(url).includes('https')\n    ? checkNullOrContent(url)\n    : checkNullOrContent(url).includes('http')\n    ? checkNullOrContent(url).replace('http', 'https')\n    : returnPlaceHolderUrl();\n};\n\nconst checkValueFromFormItem = () => {\n  fetchingNews(createQueryToApi());\n};\n\nconst onSubmitHandler = event => {\n  event.preventDefault();\n  window.someHamdler();\n};\n\nconst insertComponent = args => {\n  return checkComponentOrProps(args) ? args() : args;\n};\n\nconst concatTimeStamp = time => {\n  if (time) {\n    return time.replace(' ', 'T');\n  }\n};\n\nconst sortNewsByTimeStamp = (a, b) => {\n  return (\n    Date.parse(concatTimeStamp(b.published_date)) - Date.parse(concatTimeStamp(a.published_date))\n  );\n};\n\nconst filterNewsByRealTimeStamp = article => {\n  return Date.parse(concatTimeStamp(article.published_date)) <= Date.now();\n};\n\nwindow.someHamdler = checkValueFromFormItem;\n\nfunction resetFilters(event) {\n  event.preventDefault();\n  Object.keys(queryProperties).forEach(item => {\n    if (item !== 'q' && item !== 'page_size' && item !== 'from') {\n      setItemToLocalStore(item, 'default');\n    }\n    if (item === 'q') {\n      setItemToLocalStore(item, '*');\n    }\n    if (item === 'from') {\n      setItemToLocalStore(item, '');\n    }\n  });\n}\n\nwindow.resetFilters = resetFilters;\nwindow.setSelectedFilters = setSelectedFilters;\n\nconst applyResetFilters = event => {\n  window.resetFilters(event);\n  window.setSelectedFilters();\n};\n\nfunction queryParamFromHandler(event) {\n  setItemToLocalStore(event.target.id, event.target.value);\n}\n\nwindow.queryParamFromHandler = queryParamFromHandler;\n\nconst applyQueryParamFromHandler = event => {\n  event.preventDefault();\n  window.queryParamFromHandler(event);\n};\n\nfunction pageSizeHandler(event) {\n  setItemToLocalStore(event.target.id, event.target.value);\n}\n\nwindow.pageSizeHandler = pageSizeHandler;\n\nconst applyPageSizeHandler = event => {\n  event.preventDefault();\n  window.pageSizeHandler(event);\n};\n\nconst normalizeNews = news => {\n  return news.sort(sortNewsByTimeStamp).filter(filterNewsByRealTimeStamp);\n};\n\nfunction Header(args) {\n  return `\n    <header class=\"\n    ${styles.header}\n    \">\n    <div class=\"${styles.flex__center} ${styles.width_100} ${styles.border_bottom}\">\n      <div class=\"${styles.flex__space_between} ${styles.width_80}\">\n        <img style=\" height: 50px;\" src=\"https://archive.org/download/news-logo/news-logo.png\" alt=\"logo\"/>\n        ${args.length > 0 ? args.map(arg => insertComponent(arg)).join('') : ''}\n      </div>\n    </div>\n    <form>\n    <div class=\"\">\n    <label>Keyword <input type=\"text\" name=\"search\" value=\"*\" id=\"q\" onChange=\"(${setValueInLocalStorage2})(event)\"/></label>\n    </div>\n    <div class=\"\">\n    <label>Category <select name=\"topic\" id=\"topic\" default=\"default\" onChange=\"(${setValueInLocalStorage2})(event)\">\n    <option value=\"default\">Any</option>\n    <option value=\"business\">Business</option>\n    <option value=\"beauty\">Beauty</option>\n    <option value=\"entertainment\">Entertainment</option>\n    <option value=\"economics\">Economics</option>\n    <option value=\"finance\">Finance</option>\n    <option value=\"food\">Food</option>\n    <option value=\"news\">General</option>\n    <option value=\"music\">Music</option>\n    <option value=\"politics\">Politics</option>\n    <option value=\"science\">Science</option>\n    <option value=\"sport\">Sport</option>\n    <option value=\"tech\">Technology</option>\n    <option value=\"travel\">Travel</option>\n    <option value=\"world\">World</option>\n    </select></label>\n    </div>\n    <div class=\"\">\n    <label>Language <select name=\"lang\" id=\"lang\" default=\"default\" onChange=\"(${setValueInLocalStorage2})(event)\">\n    <option value=\"default\">Any</option>\n    <option value=\"uk\">Ukrainian </option>\n    <option value=\"de\">German</option>\n    <option value=\"en\">English</option>\n    <option value=\"ru\">Russian</option>\n    <option value=\"it\">Italian </option>\n    <option value=\"lt\">Lithuanian </option>\n    <option value=\"pt\">Portuguese</option>\n    <option value=\"es\">Espanian</option>\n    <option value=\"cn\">Chinese</option>\n    </select></label>\n    </div>\n    <div class=\"\">\n    <label>Country <select name=\"country\" default=\"default\" id=\"country\" onChange=\"(${setValueInLocalStorage2})(event)\">\n    <option value=\"default\">Any</option>\n    <option value=\"ua\">Ukraine</option>\n    <option value=\"us\">USA</option>\n    <option value=\"ru\">Russia</option>\n    <option value=\"de\">Germany</option>\n    <option value=\"gb\">Great Britain</option>\n    <option value=\"it\">Italy</option>\n    <option value=\"lt\">Lithuania</option>\n    <option value=\"pt\">Portugal</option>\n    <option value=\"sp\">Spain</option>\n    <option value=\"ch\">China</option>\n    </select></label>\n    </div>\n    <div class=\"\">\n    <label>Page size <input style=\"width: 7vw\" type=\"range\" min=\"25\" max=\"100\" value=\"50\" name=\"page_size\" id=\"page_size\"\n    onChange=\"(${applyPageSizeHandler})(event)\"></label>\n    </div>\n    <div class=\"\">\n    <label>From date <input type=\"date\" name=\"from\" id=\"from\" value=\"\" onChange=\"(${applyQueryParamFromHandler})(event)\"></label>\n    </div>\n    <div class=\"\">\n    <input style=\"background-color: #C8E6C9;\" type=\"submit\" value=\"Search\" onClick=\"(${onSubmitHandler})(event)\"/>\n    <button style=\"background-color: #ffcdd2;\" onClick=\"(${applyResetFilters})(event)\">Reset</button>\n    </div>\n    </form>\n    </header>\n  `;\n}\n\nfunction Account() {\n  return `\n  <div class=\"${styles.flex__space_between}\">\n    <div>\n    <img class=\"${styles.header__avatar}\" src=\"https://img2.freepng.ru/20180720/ivv/kisspng-computer-icons-user-profile-avatar-job-icon-5b521c567f49d7.5742234415321078625214.jpg\" alt=\"user\">\n    </div>  \n    <button>Log In</button>\n  </div>\n  `;\n}\n\nfunction Main(news) {\n  return `\n  <main class=\"${styles.main}\">\n  ${\n    news === undefined\n      ? `<h3>No matches for your search</h3>`\n      : normalizeNews(news).length > 0\n      ? normalizeNews(news)\n          .map(item => {\n            return `\n              <div class=\" ${styles.flex__start}\">\n                <img class=\"${styles.news__picture}\" src=\"${getUrlForNewsImage(item.media)}\">\n                <div>\n                  <h2><a href=\"${item.link}\" target=\"_blank\">${item.title}</a></h2>\n                  <div>${new Date(checkNullOrContent(item.published_date)).toLocaleDateString()} \n                       ${new Date(checkNullOrContent(item.published_date)).toLocaleTimeString()}\n                   </div>\n                  <div class=\"${styles.flex__space_between}\">\n                    <div>Автор: <strong>${checkNullOrContent(item.author)}</strong></div>\n                    <div><strong>${checkNullOrContent(item.clean_url)}</strong></div>\n                  </div><br/>\n                    <div>${checkNullOrContent(item.summary)}</div>\n                </div>\n              </div>\n              `;\n          })\n          .join('')\n      : `<h3>No matches for your search</h3>`\n  }\n</main>`;\n}\n\nfunction setSelectedFilters() {\n  Object.keys(queryProperties).forEach(item => {\n    if (item !== 'q' && item !== 'page_size' && item !== 'from') {\n      document\n        .querySelector(`#${item}`)\n        .querySelector(`option[value=${getItemFromLocalStore(item)}]`).selected = true;\n    }\n    if (item === 'q') {\n      if (getItemFromLocalStore(item) !== '') {\n        document.querySelector(`#${item}`).value = `${getItemFromLocalStore(item)}`;\n      } else {\n        document.querySelector(`#${item}`).value = `*`;\n      }\n    }\n    if (item === 'from' || 'page_size') {\n      document.querySelector(`#${item}`).value = getItemFromLocalStore(`${item}`);\n    }\n  });\n}\n\nfunction renderApp(apiData) {\n  App.innerHTML = `\n    ${Header([Account])}\n    ${Main(apiData)}\n`;\n  setSelectedFilters();\n}\n"]}