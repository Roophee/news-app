{"version":3,"sources":["index.js"],"names":["module","hot","accept","startEndpoint","App","document","querySelector","queryProperties","q","topic","lang","country","page_size","from","getItemFromLocalStore","key","window","localStorage","getItem","setItemToLocalStore","value","setItem","defaultSearch","input","trim","setValueInLocalStorage","event","target","id","applySetValueInLocalStorage","preventDefault","valuesFromKey","createQueryToApi","url","Object","keys","filter","item","map","replaceAll","fetchingNews","fetch","method","headers","then","response","json","catch","err","data","news","articles","renderApp","checkNullOrContent","arg","returnPlaceHolderUrl","getUrlForNewsImage","includes","replace","checkValueFromFormItem","renderMain","onSubmitHandler","someHamdler","concatTimeStamp","time","sortNewsByTimeStamp","a","b","Date","parse","published_date","filterNewsByRealTimeStamp","article","now","resetFilters","forEach","applyResetFilters","console","log","queryParamFromHandler","applyQueryParamFromHandler","pageSizeHandler","applyPageSizeHandler","normalizeNews","sort","getQueryParam","name","Header","styles","header","flex__center","width_100","border_bottom","flex__space_between","width_80","Account","header__avatar","Main","main","NewsList","NewsItem","flex__start","news__picture","media","link","title","toLocaleDateString","toLocaleTimeString","author","clean_url","summary","undefined","length","join","innerHTML","apiData"],"mappings":"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","file":"news-app.f52168cc.js","sourceRoot":"..","sourcesContent":["if (module.hot) {\n  module.hot.accept();\n}\n\nimport styles from './style.css';\nimport API_KEY from '.env';\nconst startEndpoint =\n  'https://free-news.p.rapidapi.com/v1/search?q=*&lang=uk&country=ua&page_size=100&';\nconst App = document.querySelector('.app-root');\nconst queryProperties = {\n  q: '*',\n  topic: 'default',\n  lang: 'default',\n  country: 'default',\n  page_size: '75',\n  from: '',\n};\n\nfunction getItemFromLocalStore(key) {\n  return window.localStorage.getItem(`${key}`);\n}\n\nfunction setItemToLocalStore(key, value) {\n  return window.localStorage.setItem(key, value);\n}\n\nconst defaultSearch = input => {\n  return input.trim() === '' ? '*' : input.trim();\n};\n\nconst setValueInLocalStorage = event => {\n  // console.log(event.target.id, event.target.value);\n  setItemToLocalStore(event.target.id, defaultSearch(event.target.value));\n};\n\nwindow.setValueInLocalStorage = setValueInLocalStorage;\n\nconst applySetValueInLocalStorage = event => {\n  event.preventDefault();\n  window.setValueInLocalStorage(event);\n};\n\nconst valuesFromKey = key => {\n  return !(\n    getItemFromLocalStore(`${key}`) == false || getItemFromLocalStore(`${key}`) === 'default'\n  )\n    ? `${key}=${getItemFromLocalStore(`${key}`)}&`\n    : ``;\n};\n\nconst createQueryToApi = () => {\n  let url = `https://free-news.p.rapidapi.com/v1/search?`;\n  Object.keys(queryProperties)\n    .filter(item => item !== 'from')\n    .map(key => (url += valuesFromKey(key)));\n  if (getItemFromLocalStore('from') !== '') {\n    return (url += `from=${getItemFromLocalStore('from').replaceAll('-', '/')}`);\n  }\n  return url;\n};\n\nconst fetchingNews = (url = startEndpoint) => {\n  return fetch(`${url}`, {\n    method: 'GET',\n    headers: {\n      'x-rapidapi-key': `${process.env.API_KEY}`,\n      'x-rapidapi-host': 'free-news.p.rapidapi.com',\n    },\n  })\n    .then(response => {\n      return response.json();\n    })\n    .catch(err => {\n      // console.log('error', err);\n    })\n    .then(data => {\n      window.news = data.articles;\n      return window.news;\n    });\n};\n\nfetchingNews().then(news => renderApp(news));\n// .catch(err => console.log('1', err));\n\nconst checkNullOrContent = arg => {\n  return arg === null ? '' : arg;\n};\n\nconst returnPlaceHolderUrl = () => {\n  return 'https://via.placeholder.com/450x250.png?text=NoImage';\n};\n\nconst getUrlForNewsImage = url => {\n  return checkNullOrContent(url).includes('https')\n    ? checkNullOrContent(url)\n    : checkNullOrContent(url).includes('http')\n    ? checkNullOrContent(url).replace('http', 'https')\n    : returnPlaceHolderUrl();\n};\n\nconst checkValueFromFormItem = () => {\n  fetchingNews(createQueryToApi()).then(news => renderMain(news));\n  // .catch(err => console.log('2', err));\n};\n\nconst onSubmitHandler = event => {\n  event.preventDefault();\n  window.someHamdler();\n};\n\nconst concatTimeStamp = time => {\n  if (time) {\n    return time.replace(' ', 'T');\n  }\n};\n\nconst sortNewsByTimeStamp = (a, b) => {\n  return (\n    Date.parse(concatTimeStamp(b.published_date)) - Date.parse(concatTimeStamp(a.published_date))\n  );\n};\n\nconst filterNewsByRealTimeStamp = article => {\n  return Date.parse(concatTimeStamp(article.published_date)) <= Date.now();\n};\n\nwindow.someHamdler = checkValueFromFormItem;\n\nfunction resetFilters(event) {\n  event.preventDefault();\n  // console.log('=======');\n  Object.keys(queryProperties).forEach(item => {\n    // console.log('00');\n    if (item !== 'q' && item !== 'page_size' && item !== 'from') {\n      // console.log('11');\n      setItemToLocalStore(item, 'default');\n    }\n    if (item === 'q') {\n      // console.log('22');\n      setItemToLocalStore(item, '*');\n    }\n    if (item === 'from') {\n      // console.log('33');\n      setItemToLocalStore(item, '');\n    }\n  });\n}\n\nwindow.resetFilters = resetFilters;\nwindow.fetchingNews = fetchingNews;\nwindow.renderApp = renderApp;\n\nconst applyResetFilters = event => {\n  window.resetFilters(event);\n  window\n    .fetchingNews()\n    .then(news => {\n      window.renderApp(news);\n    })\n    .catch(err => {\n      console.log('3', err);\n    });\n};\n\nfunction queryParamFromHandler(event) {\n  setItemToLocalStore(event.target.id, event.target.value);\n}\n\nwindow.queryParamFromHandler = queryParamFromHandler;\n\nconst applyQueryParamFromHandler = event => {\n  event.preventDefault();\n  window.queryParamFromHandler(event);\n};\n\nfunction pageSizeHandler(event) {\n  setItemToLocalStore(event.target.id, event.target.value);\n}\n\nwindow.pageSizeHandler = pageSizeHandler;\n\nconst applyPageSizeHandler = event => {\n  event.preventDefault();\n  window.pageSizeHandler(event);\n};\n\nconst normalizeNews = news => {\n  return news.sort(sortNewsByTimeStamp).filter(filterNewsByRealTimeStamp);\n};\n\nconst getQueryParam = name => {\n  if (getItemFromLocalStore(name) !== '*') {\n    return `${getItemFromLocalStore(name)}`;\n  }\n  return '';\n};\n\nfunction Header() {\n  return `\n    <header class=\"\n    ${styles.header}\n    \">\n    <div class=\"${styles.flex__center} ${styles.width_100} ${styles.border_bottom}\">\n      <div class=\"${styles.flex__space_between} ${styles.width_80}\">\n        <img style=\" height: 50px;\" src=\"https://archive.org/download/news-logo/news-logo.png\" alt=\"logo\"/>\n        ${Account()}\n      </div>\n    </div>\n    <form>\n    <div>\n    <label>Keyword <input type=\"text\" name=\"search\" value=\"${getQueryParam(\n      'q',\n    )}\" id=\"q\" onChange=\"(${applySetValueInLocalStorage})(event)\"/></label>\n    </div>\n    <div>\n    <label>Category <select name=\"topic\" id=\"topic\"  onChange=\"(${applySetValueInLocalStorage})(event)\">\n    <option value=\"default\">Any</option>\n    <option value=\"business\">Business</option>\n    <option value=\"beauty\">Beauty</option>\n    <option value=\"entertainment\">Entertainment</option>\n    <option value=\"economics\">Economics</option>\n    <option value=\"finance\">Finance</option>\n    <option value=\"food\">Food</option>\n    <option value=\"news\">General</option>\n    <option value=\"music\">Music</option>\n    <option value=\"politics\">Politics</option>\n    <option value=\"science\">Science</option>\n    <option value=\"sport\">Sport</option>\n    <option value=\"tech\">Technology</option>\n    <option value=\"travel\">Travel</option>\n    <option value=\"world\">World</option>\n    </select></label>\n    </div>\n    <div>\n    <label>Language <select name=\"lang\" id=\"lang\"  onChange=\"(${applySetValueInLocalStorage})(event)\">\n    <option value=\"default\">Any</option>\n    <option value=\"uk\">Ukrainian </option>\n    <option value=\"de\">German</option>\n    <option value=\"en\">English</option>\n    <option value=\"ru\">Russian</option>\n    <option value=\"it\">Italian </option>\n    <option value=\"lt\">Lithuanian </option>\n    <option value=\"pt\">Portuguese</option>\n    <option value=\"es\">Espanian</option>\n    <option value=\"cn\">Chinese</option>\n    </select></label>\n    </div>\n    <div>\n    <label>Country <select name=\"country\"  id=\"country\" onChange=\"(${applySetValueInLocalStorage})(event)\">\n    <option value=\"default\">Any</option>\n    <option value=\"ua\">Ukraine</option>\n    <option value=\"us\">USA</option>\n    <option value=\"ru\">Russia</option>\n    <option value=\"de\">Germany</option>\n    <option value=\"gb\">Great Britain</option>\n    <option value=\"it\">Italy</option>\n    <option value=\"lt\">Lithuania</option>\n    <option value=\"pt\">Portugal</option>\n    <option value=\"sp\">Spain</option>\n    <option value=\"ch\">China</option>\n    </select></label>\n    </div>\n    <div>\n    <label>Page size <input style=\"width: 7vw\" type=\"range\" min=\"25\" max=\"100\" value=\"${getItemFromLocalStore(\n      'page_size',\n    )}\" name=\"page_size\" id=\"page_size\"\n    onChange=\"(${applyPageSizeHandler})(event)\"></label>\n    </div> \n    <div>\n    <label>From date <input type=\"date\" name=\"from\" id=\"from\" value=\"${getItemFromLocalStore(\n      'from',\n    )}\" onChange=\"(${applyQueryParamFromHandler})(event)\"></label>\n    </div>\n    <div>\n    <input style=\"background-color: #C8E6C9;\" type=\"submit\" value=\"Search\" onClick=\"(${onSubmitHandler})(event)\"/>\n    <button type=\"button\" style=\"background-color: #ffcdd2;\" onClick=\"(${applyResetFilters})(event)\">Reset</button>\n    </div>\n    </form>\n    </header>\n  `;\n}\n\nfunction Account() {\n  return `\n  <div class=\"${styles.flex__space_between}\">\n    <div>\n    <img class=\"${styles.header__avatar}\" src=\"https://img2.freepng.ru/20180720/ivv/kisspng-computer-icons-user-profile-avatar-job-icon-5b521c567f49d7.5742234415321078625214.jpg\" alt=\"user\">\n    </div>  \n    <button>Log In</button>\n  </div>\n  `;\n}\n\nfunction Main(news) {\n  return `\n  <main class=\"${styles.main}\">\n  ${NewsList(news)};\n  </main>`;\n}\n\nfunction NewsItem(item) {\n  return `\n          <div class=\" ${styles.flex__start}\">\n            <img class=\"${styles.news__picture}\" src=\"${getUrlForNewsImage(item.media)}\">\n            <div>\n              <h2><a href=\"${item.link}\" target=\"_blank\">${item.title}</a></h2>\n              <div>${new Date(checkNullOrContent(item.published_date)).toLocaleDateString()} \n                   ${new Date(checkNullOrContent(item.published_date)).toLocaleTimeString()}\n               </div>\n              <div class=\"${styles.flex__space_between}\">\n                <div>Автор: <strong>${checkNullOrContent(item.author)}</strong></div>\n                <div><strong>${checkNullOrContent(item.clean_url)}</strong></div>\n              </div><br/>\n                <div>${checkNullOrContent(item.summary)}</div>\n            </div>\n          </div>\n          `;\n}\n\nfunction NewsList(news) {\n  return `\n  ${\n    news === undefined\n      ? `<h3>No matches for your search</h3>`\n      : normalizeNews(news).length > 0\n      ? normalizeNews(news)\n          .map(item => {\n            return NewsItem(item);\n          })\n          .join('')\n      : `<h3>No matches for your search</h3>`\n  }\n  `;\n}\n\nfunction renderMain(news) {\n  document.querySelector('main').innerHTML = `${NewsList(news)}`;\n}\n\nfunction renderApp(apiData) {\n  App.innerHTML = `\n    ${Header()}\n    ${Main(apiData)}\n`;\n}\n"]}