{"version":3,"sources":["index.js"],"names":["module","hot","accept","startEndpoint","App","document","querySelector","queryProperties","q","topic","lang","country","page_size","from","getItemFromLocalStore","key","window","localStorage","getItem","setItemToLocalStore","value","setItem","Object","keys","forEach","item","defaultSearch","input","trim","setValueInLocalStorage","event","target","id","selected","setValueInLocalStorage2","preventDefault","valuesFromKey","createQueryToApi","url","filter","map","replaceAll","fetchingNews","fetch","method","headers","then","response","json","catch","err","data","renderApp","articles","checkComponentOrProps","args","checkNullOrContent","arg","returnPlaceHolderUrl","getUrlForNewsImage","includes","replace","checkValueFromFormItem","onSubmitHandler","someHamdler","insertComponent","concatTimeStamp","time","sortNewsByTimeStamp","a","b","Date","parse","published_date","filterNewsByRealTimeStamp","article","now","resetFilters","setSelectedFilters","applyResetFilters","queryParamFromHandler","applyQueryParamFromHandler","pageSizeHandler","applyPageSizeHandler","normalizeNews","news","sort","Header","styles","header","flex__center","width_100","border_bottom","flex__space_between","width_80","length","join","Account","header__avatar","Main","main","undefined","flex__start","news__picture","media","link","title","toLocaleDateString","toLocaleTimeString","author","clean_url","summary","apiData","innerHTML"],"mappings":"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","file":"news-app.49c838ef.js","sourceRoot":"..","sourcesContent":["if (module.hot) {\r\n  module.hot.accept();\r\n}\r\n\r\nimport styles from './style.css';\r\nconst startEndpoint = 'https://free-news.p.rapidapi.com/v1/search?q=*&lang=uk&country=ua&page_size=100&';\r\nconst App = document.querySelector('.app-root');\r\nconst queryProperties = {\r\n  q: '*',\r\n  topic: 'default',\r\n  lang: 'default',\r\n  country: 'default',\r\n  page_size: '75',\r\n  from: '',\r\n};\r\n\r\nfunction getItemFromLocalStore(key) {\r\n  return window.localStorage.getItem(`${key}`);\r\n};\r\n\r\nfunction setItemToLocalStore(key, value) {\r\n  return window.localStorage.setItem(key, value);\r\n};\r\n\r\nObject.keys(queryProperties).forEach(item => {\r\n  setItemToLocalStore(item, queryProperties[item]);\r\n});\r\n\r\nconst defaultSearch = input => {\r\n  return input.trim() === '' ? '*' : input.trim();\r\n};\r\n\r\nconst setValueInLocalStorage = event => {\r\n  setItemToLocalStore(event.target.id, defaultSearch(event.target.value));\r\n  event.target.value\r\n    ? (event.target.querySelector(`option[value=${event.target.value}]`).selected = true)\r\n    : '';\r\n};\r\n\r\nwindow.setValueInLocalStorage = setValueInLocalStorage;\r\n\r\nconst setValueInLocalStorage2 = event => {\r\n  event.preventDefault();\r\n  window.setValueInLocalStorage(event);\r\n};\r\n\r\nconst valuesFromKey = key => {\r\n  return !(\r\n    getItemFromLocalStore(`${key}`) == false || getItemFromLocalStore(`${key}`) === 'default'\r\n  )\r\n    ? `${key}=${getItemFromLocalStore(`${key}`)}&`\r\n    : ``;\r\n};\r\n\r\nconst createQueryToApi = () => {\r\n  let url = `https://free-news.p.rapidapi.com/v1/search?`;\r\n  Object.keys(queryProperties)\r\n    .filter(item => item !== 'from')\r\n    .map(key => (url += valuesFromKey(key)));\r\n  if (getItemFromLocalStore('from') !== '') {\r\n    return (url += `&from=${getItemFromLocalStore('from').replaceAll('-', '/')}`);\r\n  }\r\n  return url;\r\n};\r\n\r\nconst fetchingNews = (url = startEndpoint) => {\r\n  fetch(`${url}`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'x-rapidapi-key': `${process.env.API_KEY}`,\r\n      'x-rapidapi-host': 'free-news.p.rapidapi.com',\r\n    },\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      // console.log('error', err);\r\n    })\r\n    .then(data => {\r\n      renderApp(data.articles);\r\n    });\r\n};\r\n\r\nfetchingNews();\r\n\r\nconst checkComponentOrProps = args => {\r\n  if (typeof args === 'function') {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nconst checkNullOrContent = arg => {\r\n  return arg === null ? '' : arg;\r\n};\r\n\r\nconst returnPlaceHolderUrl = () => {\r\n  return 'https://via.placeholder.com/450x250.png?text=NoImage';\r\n};\r\n\r\nconst getUrlForNewsImage = url => {\r\n  return checkNullOrContent(url).includes('https')\r\n    ? checkNullOrContent(url)\r\n    : checkNullOrContent(url).includes('http')\r\n    ? checkNullOrContent(url).replace('http', 'https')\r\n    : returnPlaceHolderUrl();\r\n};\r\n\r\nconst checkValueFromFormItem = () => {\r\n  fetchingNews(createQueryToApi());\r\n};\r\n\r\nconst onSubmitHandler = event => {\r\n  event.preventDefault();\r\n  window.someHamdler();\r\n};\r\n\r\nconst insertComponent = args => {\r\n  return checkComponentOrProps(args) ? args() : args;\r\n};\r\n\r\nconst concatTimeStamp = time => {\r\n  if (time) {\r\n    return time.replace(' ', 'T');\r\n  }\r\n};\r\n\r\nconst sortNewsByTimeStamp = (a, b) => {\r\n  return (\r\n    Date.parse(concatTimeStamp(b.published_date)) - Date.parse(concatTimeStamp(a.published_date))\r\n  );\r\n};\r\n\r\nconst filterNewsByRealTimeStamp = article => {\r\n  return Date.parse(concatTimeStamp(article.published_date)) <= Date.now();\r\n};\r\n\r\nwindow.someHamdler = checkValueFromFormItem;\r\n\r\nfunction resetFilters(event) {\r\n  event.preventDefault();\r\n  Object.keys(queryProperties).forEach(item => {\r\n    if (item !== 'q' && item !== 'page_size' && item !== 'from') {\r\n      setItemToLocalStore(item, 'default');\r\n    }\r\n    if (item === 'q') {\r\n      setItemToLocalStore(item, '*');\r\n    }\r\n    if (item === 'from') {\r\n      setItemToLocalStore(item, '');\r\n    }\r\n  });\r\n}\r\n\r\nwindow.resetFilters = resetFilters;\r\nwindow.setSelectedFilters = setSelectedFilters;\r\n\r\nconst applyResetFilters = event => {\r\n  window.resetFilters(event);\r\n  window.setSelectedFilters();\r\n};\r\n\r\nfunction queryParamFromHandler(event) {\r\n  setItemToLocalStore(event.target.id, event.target.value);\r\n}\r\n\r\nwindow.queryParamFromHandler = queryParamFromHandler;\r\n\r\nconst applyQueryParamFromHandler = event => {\r\n  event.preventDefault();\r\n  window.queryParamFromHandler(event);\r\n};\r\n\r\nfunction pageSizeHandler(event) {\r\n  setItemToLocalStore(event.target.id, event.target.value);\r\n}\r\n\r\nwindow.pageSizeHandler = pageSizeHandler;\r\n\r\nconst applyPageSizeHandler = event => {\r\n  event.preventDefault();\r\n  window.pageSizeHandler(event);\r\n};\r\n\r\nconst normalizeNews = news => {\r\n  return news.sort(sortNewsByTimeStamp).filter(filterNewsByRealTimeStamp);\r\n};\r\n\r\nfunction Header(args) {\r\n  return `\r\n    <header class=\"\r\n    ${styles.header}\r\n    \">\r\n    <div class=\"${styles.flex__center} ${styles.width_100} ${styles.border_bottom}\">\r\n      <div class=\"${styles.flex__space_between} ${styles.width_80}\">\r\n        <img style=\" height: 50px;\" src=\"https://archive.org/download/news-logo/news-logo.png\" alt=\"logo\"/>\r\n        ${args.length > 0 ? args.map(arg => insertComponent(arg)).join('') : ''}\r\n      </div>\r\n    </div>\r\n    <form>\r\n    <div class=\"\">\r\n    <label>Keyword <input type=\"text\" name=\"search\" value=\"*\" id=\"q\" onChange=\"(${setValueInLocalStorage2})(event)\"/></label>\r\n    </div>\r\n    <div class=\"\">\r\n    <label>Category <select name=\"topic\" id=\"topic\" default=\"default\" onChange=\"(${setValueInLocalStorage2})(event)\">\r\n    <option value=\"default\">Any</option>\r\n    <option value=\"business\">Business</option>\r\n    <option value=\"beauty\">Beauty</option>\r\n    <option value=\"entertainment\">Entertainment</option>\r\n    <option value=\"economics\">Economics</option>\r\n    <option value=\"finance\">Finance</option>\r\n    <option value=\"food\">Food</option>\r\n    <option value=\"news\">General</option>\r\n    <option value=\"music\">Music</option>\r\n    <option value=\"politics\">Politics</option>\r\n    <option value=\"science\">Science</option>\r\n    <option value=\"sport\">Sport</option>\r\n    <option value=\"tech\">Technology</option>\r\n    <option value=\"travel\">Travel</option>\r\n    <option value=\"world\">World</option>\r\n    </select></label>\r\n    </div>\r\n    <div class=\"\">\r\n    <label>Language <select name=\"lang\" id=\"lang\" default=\"default\" onChange=\"(${setValueInLocalStorage2})(event)\">\r\n    <option value=\"default\">Any</option>\r\n    <option value=\"uk\">Ukrainian </option>\r\n    <option value=\"de\">German</option>\r\n    <option value=\"en\">English</option>\r\n    <option value=\"ru\">Russian</option>\r\n    <option value=\"it\">Italian </option>\r\n    <option value=\"lt\">Lithuanian </option>\r\n    <option value=\"pt\">Portuguese</option>\r\n    <option value=\"es\">Espanian</option>\r\n    <option value=\"cn\">Chinese</option>\r\n    </select></label>\r\n    </div>\r\n    <div class=\"\">\r\n    <label>Country <select name=\"country\" default=\"default\" id=\"country\" onChange=\"(${setValueInLocalStorage2})(event)\">\r\n    <option value=\"default\">Any</option>\r\n    <option value=\"ua\">Ukraine</option>\r\n    <option value=\"us\">USA</option>\r\n    <option value=\"ru\">Russia</option>\r\n    <option value=\"de\">Germany</option>\r\n    <option value=\"gb\">Great Britain</option>\r\n    <option value=\"it\">Italy</option>\r\n    <option value=\"lt\">Lithuania</option>\r\n    <option value=\"pt\">Portugal</option>\r\n    <option value=\"sp\">Spain</option>\r\n    <option value=\"ch\">China</option>\r\n    </select></label>\r\n    </div>\r\n    <div class=\"\">\r\n    <label>Page size <input style=\"width: 7vw\" type=\"range\" min=\"25\" max=\"100\" value=\"50\" name=\"page_size\" id=\"page_size\"\r\n    onChange=\"(${applyPageSizeHandler})(event)\"></label>\r\n    </div>\r\n    <div class=\"\">\r\n    <label>From date <input type=\"date\" name=\"from\" id=\"from\" value=\"\" onChange=\"(${applyQueryParamFromHandler})(event)\"></label>\r\n    </div>\r\n    <div class=\"\">\r\n    <input style=\"background-color: #C8E6C9;\" type=\"submit\" value=\"Search\" onClick=\"(${onSubmitHandler})(event)\"/>\r\n    <button style=\"background-color: #ffcdd2;\" onClick=\"(${applyResetFilters})(event)\">Reset</button>\r\n    </div>\r\n    </form>\r\n    </header>\r\n  `;\r\n}\r\n\r\nfunction Account() {\r\n  return `\r\n  <div class=\"${styles.flex__space_between}\">\r\n    <div>\r\n    <img class=\"${styles.header__avatar}\" src=\"https://img2.freepng.ru/20180720/ivv/kisspng-computer-icons-user-profile-avatar-job-icon-5b521c567f49d7.5742234415321078625214.jpg\" alt=\"user\">\r\n    </div>  \r\n    <button>Log In</button>\r\n  </div>\r\n  `;\r\n}\r\n\r\nfunction Main(news) {\r\n  return `\r\n  <main class=\"${styles.main}\">\r\n  ${\r\n    news === undefined\r\n      ? `<h3>No matches for your search</h3>`\r\n      : normalizeNews(news).length > 0\r\n      ? normalizeNews(news)\r\n          .map(item => {\r\n            return `\r\n              <div class=\" ${styles.flex__start}\">\r\n                <img class=\"${styles.news__picture}\" src=\"${getUrlForNewsImage(item.media)}\">\r\n                <div>\r\n                  <h2><a href=\"${item.link}\" target=\"_blank\">${item.title}</a></h2>\r\n                  <div>${new Date(checkNullOrContent(item.published_date)).toLocaleDateString()} \r\n                       ${new Date(checkNullOrContent(item.published_date)).toLocaleTimeString()}\r\n                   </div>\r\n                  <div class=\"${styles.flex__space_between}\">\r\n                    <div>Автор: <strong>${checkNullOrContent(item.author)}</strong></div>\r\n                    <div><strong>${checkNullOrContent(item.clean_url)}</strong></div>\r\n                  </div><br/>\r\n                    <div>${checkNullOrContent(item.summary)}</div>\r\n                </div>\r\n              </div>\r\n              `;\r\n          })\r\n          .join('')\r\n      : `<h3>No matches for your search</h3>`\r\n  }\r\n</main>`;\r\n}\r\n\r\nfunction setSelectedFilters() {\r\n  Object.keys(queryProperties).forEach(item => {\r\n    if (item !== 'q' && item !== 'page_size' && item !== 'from') {\r\n      document\r\n        .querySelector(`#${item}`)\r\n        .querySelector(`option[value=${getItemFromLocalStore(item)}]`).selected = true;\r\n    }\r\n    if (item === 'q') {\r\n      if (getItemFromLocalStore(item) !== '') {\r\n        document.querySelector(`#${item}`).value = `${getItemFromLocalStore(item)}`;\r\n      } else {\r\n        document.querySelector(`#${item}`).value = `*`;\r\n      }\r\n    }\r\n    if (item === 'from' || 'page_size') {\r\n      document.querySelector(`#${item}`).value = getItemFromLocalStore(`${item}`);\r\n    }\r\n  });\r\n}\r\n\r\nfunction renderApp(apiData) {\r\n  App.innerHTML = `\r\n    ${Header([Account])}\r\n    ${Main(apiData)}\r\n`;\r\n  setSelectedFilters();\r\n}\r\n"]}